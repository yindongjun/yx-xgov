webpackJsonp([14],{"+ZLI":function(e,t,a){"use strict";function r(e){a("4I6J")}var l=a("qpHs"),o=a("M4eP"),i=a("VU/8"),n=r,s=i(l.a,o.a,!1,n,null,null);t.a=s.exports},"/rzo":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"meta-collect main-outer"},[a("el-row",{staticClass:"common-condition ar mb15"}),e._v(" "),a("div",{staticClass:"main-inner"},[a("el-tabs",{attrs:{type:"card","before-leave":e.beforeLeave},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticClass:"collect-child",attrs:{label:"元数据采集列表",name:"first"}},[a("collect-list",{attrs:{CollectListTabTime:e.CollectListTabTime}})],1),e._v(" "),a("el-tab-pane",{staticClass:"collect-child",attrs:{label:"元数据入库审核",name:"second"}},[a("storage-check",{attrs:{StorageCheckTabTime:e.StorageCheckTabTime}})],1)],1)],1)],1)},l=[],o={render:r,staticRenderFns:l};t.a=o},"4I6J":function(e,t,a){var r=a("pHcM");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("3f30f210",r,!0,{})},"6kE+":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".storage-check{height:100%}.storage-check .el-dialog__body{padding-left:20px;padding-right:20px;padding-bottom:40px}.storage-check .searchBtn{color:#797b7b;cursor:pointer}.storage-check .searchBtn:hover{color:#3ba3f8}.storage-check .storage-check-list{height:calc(100% - 87px);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap;overflow:auto}.storage-check .storage-check-list .no-data-pic-outer{height:100%;text-align:center;position:relative;width:100%}.storage-check .storage-check-list .no-data-pic-outer .no-data-box{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.storage-check .storage-check-list .no-data-pic-outer .no-data-box .no-data-text{color:#9da1a9;padding:20px 0}.storage-check .storage-check-list li{margin-right:60px;overflow:hidden;margin-bottom:30px;border:1px solid #e1e5ec;text-align:center;width:187px;-webkit-box-shadow:0 1px 4px 0 hsla(0,0%,84%,.5);box-shadow:0 1px 4px 0 hsla(0,0%,84%,.5);border-radius:2px;position:relative;-webkit-transition:2s linear;transition:2s linear;height:95px}.storage-check .storage-check-list li .check-header{line-height:32px;background:#acb5c3;color:#fff;margin:0}.storage-check .storage-check-list li .check-body{background:#f9f9fa;padding-top:19px;-webkit-box-sizing:border-box;box-sizing:border-box;padding-bottom:16px}.storage-check .storage-check-list li .check-body span{line-height:28px;font-size:16px;font-weight:700}.storage-check .storage-check-list li .check-set{position:absolute;width:100%;height:32px;background:rgba(51,55,67,.7);bottom:-32px;left:0;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:.5s;transition:.5s;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.storage-check .storage-check-list li .check-set span{width:45px;display:inline-block;height:100%;font-size:16px;line-height:32px;text-align:center;color:#fff}.storage-check .storage-check-list li .check-set span:hover{background:hsla(0,0%,100%,.27)}.storage-check .storage-check-list li:hover .check-set{bottom:0}.el-radio__label{font-size:12px!important}",""])},"9rLg":function(e,t,a){"use strict";function r(e){a("BaxB")}Object.defineProperty(t,"__esModule",{value:!0});var l=a("zXpv"),o=a("/rzo"),i=a("VU/8"),n=r,s=i(l.a,o.a,!1,n,null,null);t.default=s.exports},Asxw:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""])},BaxB:function(e,t,a){var r=a("FJZh");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("c1c42dd2",r,!0,{})},DoGJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:{type:String,default:"top"}},computed:{style:function(){var e={};return this.gutter&&(e.marginLeft="-"+this.gutter/2+"px",e.marginRight=e.marginLeft),e}},render:function(e){return e(this.tag,{class:["el-row","start"!==this.justify?"is-justify-"+this.justify:"","top"!==this.align?"is-align-"+this.align:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)}}},FJZh:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".main-inner{height:calc(100% - 75px)}.main-inner .el-tabs{height:100%}.main-inner .el-tabs .el-tabs__content{height:calc(100% - 55px)}.main-inner .el-tabs .el-tabs__content .collect-child{height:100%}",""])},ITl7:function(e,t,a){e.exports=a.p+"static/img/noDataPic.057591f.png"},JShJ:function(e,t,a){var r=a("6kE+");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("8b59fdd4",r,!0,{})},LmdA:function(e,t,a){"use strict";function r(e){a("JShJ")}var l=a("RCAl"),o=a("q02/"),i=a("VU/8"),n=r,s=i(l.a,o.a,!1,n,null,null);t.a=s.exports},M4eP:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"collect-list"},[r("el-row",{staticClass:"search-condition ar mb10"},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入任务名称进行查询",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.dataSourceName,callback:function(t){e.dataSourceName=t},expression:"dataSourceName"}},[r("i",{staticClass:"el-input__icon el-icon-search searchBtn",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchList},slot:"suffix"})]),e._v(" "),r("el-button",{staticClass:"ml10",attrs:{size:"small",type:"danger"},on:{click:function(t){return e.addCollect(-1)}}},[e._v("新建采集")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"danger",disabled:this.deleteSelection.length<=0},on:{click:function(t){return e.deleteCollect("s",1)}}},[e._v("删除")])],1),e._v(" "),0===e.sourceList.length?r("div",{staticClass:"no-data-pic-outer valign"},[r("div",{staticClass:"no-data-box"},[r("img",{staticClass:"no-data-pic",attrs:{src:a("ITl7")}}),e._v(" "),r("p",{staticClass:"no-data-text"},[e._v("暂无数据，请先"),r("span",{staticClass:"redText",on:{click:function(t){return e.addCollect(-1)}}},[e._v(" 新建采集任务")])])])]):e._e(),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.sourceList,height:"calc(100% - 87px)"},on:{"selection-change":e.changeFun}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"taskName","show-overflow-tooltip":!0,label:"任务名称"}}),e._v(" "),r("el-table-column",{attrs:{label:"数据源名称"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"===t.row.deleteFlag?r("div",{staticStyle:{color:"#e52100"}},[e._v("\n          "+e._s(t.row.dataSourceName)+"(已删除)\n        ")]):e._e(),e._v(" "),"0"===t.row.deleteFlag?r("div",[e._v("\n          "+e._s(t.row.dataSourceName)+"\n        ")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"sourceType",label:"数据库类型"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:this.$utils.dateFormat}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticClass:"operate-btn",attrs:{disabled:"2"===t.row.deleteFlag,type:"text"},on:{click:function(a){return e.addCollect(t.row.id)}}},[e._v("编辑")]),e._v(" "),r("el-button",{staticClass:"operate-btn",attrs:{type:"text"},on:{click:function(a){return e.deleteCollect(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-pagination",{staticClass:"ar mt15",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),r("add-update-collect",{attrs:{editCollectVisible:e.editCollectVisible,isEditRelation:e.isEditRelation},on:{editCollectBack:e.editCollectBack}})],1)},l=[],o={render:r,staticRenderFns:l};t.a=o},RCAl:function(e,t,a){"use strict";var r=a("o1nd"),l=a("DoGJ"),o=a.n(l),i=a("kMct"),n=a.n(i);t.a={name:"",components:{ElCol:n.a,ElRow:o.a,SvgIcon:r.default},data:function(){return{currentPageInner:1,totalInner:0,pageLengthInner:10,innerVisible:!1,dialogVisible:!1,dataSourceName:"",total:0,currentPage:1,pageLength:12,sourceList:[],InnerForm:{sourceId:"",collectHisId:"",deleteMetadataNum:"",newMetadataNum:"",desc:"已通过",status:"1",warning:"审核通过后，系统以本次采集结果更新元数据库，历史采集未入库记录将失效。"},currId:"",loadingTable:!1,gridData:[],buttonLoading:!1,rules:{desc:[{required:!0,message:"请填写描述信息",trigger:"change"},{min:1,max:255,message:"长度在 1 到 255 个字符",trigger:"blur"}]}}},props:["StorageCheckTabTime"],methods:{changeRadio:function(e){1==e?(this.InnerForm.desc="已通过",this.InnerForm.warning="审核通过后，系统以本次采集结果更新元数据库，历史采集未入库记录将失效。"):(this.InnerForm.desc="已驳回",this.InnerForm.warning="驳回后，系统将放弃更新本次元数据变更信息。")},openInner:function(){var e=this,t={sourceId:this.InnerForm.sourceId,collectHisId:this.InnerForm.collectHisId};this.InnerForm.desc="已通过",this.InnerForm.status="1",this.$urlApi.metaData.compareData(t).then(function(t){e.InnerForm.newMetadataNum=t.data.newMetadataNum,e.InnerForm.deleteMetadataNum=t.data.deleteMetadataNum})},getCheckList:function(e){var t=this;e&&(this.currentPage=e);var a={start:(this.currentPage-1)*this.pageLength,length:this.pageLength,taskName:this.dataSourceName};this.$urlApi.metaData.getcheckList(a).then(function(e){t.sourceList=e.data,t.total=e.recordsFiltered})},handleSizeChange:function(e){this.pageLength=e,this.getCheckList(1)},handleCurrentChange:function(e){this.currentPage=e,this.getCheckList()},searchList:function(){this.getCheckList(1)},checkTask:function(e){var t=this;this.dialogVisible=!0,this.currId=e,this.InnerForm.sourceId=e;var a={sourceId:this.currId,start:10*(this.currentPageInner-1),length:this.pageLengthInner};this.loadingTable=!0,this.$urlApi.metaData.unreleaseCollecthis(a).then(function(e){t.loadingTable=!1,t.gridData=e.data,t.totalInner=e.recordsFiltered})},handleCurrentChangeInner:function(e){var t=this;this.currentPageInner=e,this.loadingTable=!0;var a={sourceId:this.currId,start:10*(this.currentPageInner-1),length:this.pageLengthInner};this.$urlApi.metaData.unreleaseCollecthis(a).then(function(e){t.loadingTable=!1,t.gridData=e.data,t.totalInner=e.recordsFiltered})},handleClose:function(){this.dialogVisible=!1,this.innerVisible=!1,this.gridData=[]},closeOuterModal:function(){this.getCheckList()},checkMetaData:function(e){this.innerVisible=!0,this.InnerForm.collectHisId=e},submitMetaForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.buttonLoading=!0,t.$urlApi.metaData.submitCompareCheck(t.InnerForm).then(function(e){t.buttonLoading=!1,"1"===t.InnerForm.status&&t.$toast("success","审核通过，元数据库已更新"),"2"===t.InnerForm.status&&t.$toast("success","元数据入库已驳回"),t.$refs.InnerForm.resetFields(),t.InnerForm.newMetadataNum="",t.InnerForm.deleteMetadataNum="",t.innerVisible=!1}).then(function(e){var a={sourceId:t.currId,start:10*(t.currentPageInner-1),length:t.pageLengthInner};t.$urlApi.metaData.unreleaseCollecthis(a).then(function(e){t.gridData=e.data,t.totalInner=e.recordsFiltered})}).catch(function(e){t.buttonLoading=!1,t.$toast("error","审核操作超时，请稍后重试")})})},closeInnerForm:function(){this.$refs.InnerForm.resetFields(),this.InnerForm.newMetadataNum="",this.InnerForm.deleteMetadataNum="",this.innerVisible=!1}},mounted:function(){this.getCheckList()},watch:{StorageCheckTabTime:function(e,t){this.getCheckList()}}}},T5X1:function(e,t,a){"use strict";function r(e){a("u712")}var l=a("rwXC"),o=a("TsAV"),i=a("VU/8"),n=r,s=i(l.a,o.a,!1,n,null,null);t.a=s.exports},TsAV:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"close-on-click-modal":!1,title:-1===e.isEditRelation.id?"新建采集":"编辑采集",visible:e.editCollectVisible,"before-close":e.closeDialog,width:"760px"},on:{"update:visible":function(t){e.editCollectVisible=t},close:e.clearData}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,size:"small","label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"采集任务名称",prop:"taskName"}},[a("el-input",{attrs:{maxlength:"20",placeholder:"最大长度为20个字符"},model:{value:e.ruleForm.taskName,callback:function(t){e.$set(e.ruleForm,"taskName",t)},expression:"ruleForm.taskName"}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据源名称",prop:"datasourceId"}},[-1===e.isEditRelation.id?a("el-select",{attrs:{placeholder:"请选择数据源名称"},model:{value:e.ruleForm.datasourceId,callback:function(t){e.$set(e.ruleForm,"datasourceId",t)},expression:"ruleForm.datasourceId"}},e._l(e.dataOption,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.datasourceName}})}),1):a("span",[e._v(e._s(e.dataSourceName))])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"挂载目录",prop:"reMetadataMenuId"}},[a("el-cascader",{attrs:{"change-on-select":"",options:e.layerOptions,props:e.layerOptionsProps},model:{value:e.ruleForm.reMetadataMenuId,callback:function(t){e.$set(e.ruleForm,"reMetadataMenuId",t)},expression:"ruleForm.reMetadataMenuId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"调度方式",prop:"cycleType"}},[a("el-select",{attrs:{placeholder:"请选择调度方式"},on:{change:e.cycleTypeChange},model:{value:e.ruleForm.cycleType,callback:function(t){e.$set(e.ruleForm,"cycleType",t)},expression:"ruleForm.cycleType"}},[a("el-option",{attrs:{value:"0",label:"单次"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"周期性"}})],1)],1)],1)],1),e._v(" "),"0"===e.ruleForm.cycleType?a("el-form-item",{attrs:{label:"采集频率",prop:"triggerTime"}},[a("el-date-picker",{attrs:{size:"small",type:"datetime","value-format":"timestamp",placeholder:"选择执行时间"},model:{value:e.ruleForm.triggerTime,callback:function(t){e.$set(e.ruleForm,"triggerTime",t)},expression:"ruleForm.triggerTime"}})],1):e._e(),e._v(" "),"1"===e.ruleForm.cycleType?a("el-form-item",{attrs:{label:"采集频率",prop:"jobCron"}},[a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"请设置执行周期"},on:{change:e.setCycle},model:{value:e.ruleForm.jobCron,callback:function(t){e.$set(e.ruleForm,"jobCron",t)},expression:"ruleForm.jobCron"}},[a("el-option",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"请选择频率",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"按月执行",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"按周执行",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"按天执行",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"按小时执行",value:"3"}})],1)],1),e._v(" "),"0"===e.CycleSelected?a("el-col",{staticClass:"year ml5",attrs:{span:17}},[a("el-col",{staticClass:"mr5",attrs:{span:8}},[a("el-input-number",{attrs:{min:1,max:31,label:"设置执行日"},on:{change:e.handleChange},model:{value:e.ruleForm.exeDate1.value1,callback:function(t){e.$set(e.ruleForm.exeDate1,"value1",t)},expression:"ruleForm.exeDate1.value1"}})],1),e._v(" "),a("el-col",{attrs:{span:13}},[a("el-time-picker",{attrs:{placeholder:"任意时间点","value-format":"HH:mm:ss"},model:{value:e.ruleForm.exeDate1.value2,callback:function(t){e.$set(e.ruleForm.exeDate1,"value2",t)},expression:"ruleForm.exeDate1.value2"}})],1)],1):e._e(),e._v(" "),"1"===e.CycleSelected?a("el-col",{staticClass:"year ml5",attrs:{span:16}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"请设置执行周期"},model:{value:e.ruleForm.exeDate2.value1,callback:function(t){e.$set(e.ruleForm.exeDate2,"value1",t)},expression:"ruleForm.exeDate2.value1"}},[a("el-option",{attrs:{label:"周日",value:"SUN"}}),e._v(" "),a("el-option",{attrs:{label:"周一",value:"MON"}}),e._v(" "),a("el-option",{attrs:{label:"周二",value:"TUE"}}),e._v(" "),a("el-option",{attrs:{label:"周三",value:"WED"}}),e._v(" "),a("el-option",{attrs:{label:"周四",value:"THU"}}),e._v(" "),a("el-option",{attrs:{label:"周五",value:"FRI"}}),e._v(" "),a("el-option",{attrs:{label:"周六",value:"SAT"}})],1)],1),e._v(" "),a("el-col",{staticClass:"ml5",attrs:{span:6}},[a("el-time-picker",{attrs:{placeholder:"任意时间点","value-format":"HH:mm:ss"},model:{value:e.ruleForm.exeDate2.value2,callback:function(t){e.$set(e.ruleForm.exeDate2,"value2",t)},expression:"ruleForm.exeDate2.value2"}})],1)],1):e._e(),e._v(" "),"2"===e.CycleSelected?a("el-col",{staticClass:"year ml5",attrs:{span:16}},[a("el-col",{attrs:{span:6}},[a("el-time-picker",{attrs:{placeholder:"任意时间点","value-format":"HH:mm:ss"},model:{value:e.ruleForm.exeDate3.value1,callback:function(t){e.$set(e.ruleForm.exeDate3,"value1",t)},expression:"ruleForm.exeDate3.value1"}})],1)],1):e._e(),e._v(" "),"3"===e.CycleSelected?a("el-col",{staticClass:"year ml5",attrs:{span:16}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择时间（可多选）"},model:{value:e.ruleForm.exeDate4.value1,callback:function(t){e.$set(e.ruleForm.exeDate4,"value1",t)},expression:"ruleForm.exeDate4.value1"}},e._l(e.timeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e()],1):e._e(),e._v(" "),"1"===e.ruleForm.cycleType?a("el-form-item",{attrs:{label:"生效时间",prop:"effectTimeRange"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd HH:mm:ss",size:"small","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.ruleForm.effectTimeRange,callback:function(t){e.$set(e.ruleForm,"effectTimeRange",t)},expression:"ruleForm.effectTimeRange"}})],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",loading:e.buttonLoading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保 存")])],1)],1)},l=[],o={render:r,staticRenderFns:l};t.a=o},kMct:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter:function(){for(var e=this.$parent;e&&"ElRow"!==e.$options.componentName;)e=e.$parent;return e?e.gutter:0}},render:function(e){var t=this,a=[],l={};return this.gutter&&(l.paddingLeft=this.gutter/2+"px",l.paddingRight=l.paddingLeft),["span","offset","pull","push"].forEach(function(e){(t[e]||0===t[e])&&a.push("span"!==e?"el-col-"+e+"-"+t[e]:"el-col-"+t[e])}),["xs","sm","md","lg","xl"].forEach(function(e){if("number"==typeof t[e])a.push("el-col-"+e+"-"+t[e]);else if("object"===r(t[e])){var l=t[e];Object.keys(l).forEach(function(t){a.push("span"!==t?"el-col-"+e+"-"+t+"-"+l[t]:"el-col-"+e+"-"+l[t])})}}),e(this.tag,{class:["el-col",a],style:l},this.$slots.default)}}},pHcM:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".collect-list{height:100%}.collect-list .searchBtn{color:#797b7b;cursor:pointer}.collect-list .searchBtn:hover{color:#3ba3f8}.collect-list .no-data-pic-outer{height:100%;text-align:center;position:relative;width:100%}.collect-list .no-data-pic-outer .no-data-box{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.collect-list .no-data-pic-outer .no-data-box .no-data-text{color:#9da1a9;padding:20px 0}",""])},"q02/":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"storage-check"},[a("el-row",{staticClass:"search-condition ar mb10"},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入任务名称进行查询",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.dataSourceName,callback:function(t){e.dataSourceName=t},expression:"dataSourceName"}},[a("i",{staticClass:"el-input__icon el-icon-search searchBtn",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchList},slot:"suffix"})])],1),e._v(" "),a("ul",{staticClass:"storage-check-list"},[0===e.sourceList.length?a("div",{staticClass:"no-data-pic-outer valign"},[e._m(0)]):e._e(),e._v(" "),e._l(e.sourceList,function(t){return a("li",{key:t.id},[a("p",{staticClass:"check-header over",attrs:{title:t.taskName}},[e._v("\n        "+e._s(t.taskName)+"\n      ")]),e._v(" "),a("div",{staticClass:"check-body"},[a("span",[e._v(e._s(t.dataSourceName))]),a("br")]),e._v(" "),a("div",{staticClass:"check-set"},[a("span",{on:{click:function(a){return e.checkTask(t.datasourceId)}}},[a("svg-icon",{attrs:{iconClass:"审核"}})],1)])])})],2),e._v(" "),0!==e.sourceList.length?a("el-pagination",{staticClass:"ar mt15",attrs:{"current-page":e.currentPage,"page-size":12,layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"数据源入库审核",visible:e.dialogVisible,width:"760px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeOuterModal}},[a("el-dialog",{attrs:{"close-on-click-modal":!1,width:"500px",title:"审核",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t},closed:e.closeInnerForm,open:e.openInner}},[a("el-row",{staticStyle:{"font-size":"12px"}},[a("el-col",{attrs:{span:12}},[e._v("新增表 : "+e._s(e.InnerForm.newMetadataNum))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("删除表 ："+e._s(e.InnerForm.deleteMetadataNum))])],1),e._v(" "),a("el-form",{ref:"InnerForm",attrs:{model:e.InnerForm,size:"small",rules:e.rules,"label-width":"70px","label-position":"right"}},[a("el-form-item",{attrs:{label:"审核结果"}},[a("el-radio-group",{on:{change:e.changeRadio},model:{value:e.InnerForm.status,callback:function(t){e.$set(e.InnerForm,"status",t)},expression:"InnerForm.status"}},[a("el-radio",{attrs:{label:"1"}},[e._v("审核通过")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("驳回")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("el-input",{attrs:{rows:3,type:"textarea"},model:{value:e.InnerForm.desc,callback:function(t){e.$set(e.InnerForm,"desc",t)},expression:"InnerForm.desc"}})],1),e._v(" "),a("p",{staticStyle:{"font-size":"12px","padding-left":"15px"}},[a("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.InnerForm.warning)+"\n        ")])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.closeInnerForm}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",loading:e.buttonLoading},on:{click:function(t){return e.submitMetaForm("InnerForm")}}},[e._v("保 存")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%"},attrs:{data:e.gridData,height:"320"}},[a("el-table-column",{attrs:{prop:"startTime",label:"采集时间",formatter:this.$utils.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"spent",label:"执行时长(s)"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"operate-btn",attrs:{type:"text"},on:{click:function(a){return e.checkMetaData(t.row.id)}}},[e._v("审核")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"ar mt15",attrs:{"current-page":e.currentPageInner,"page-size":10,layout:"total, prev, pager, next",total:e.totalInner},on:{"current-change":e.handleCurrentChangeInner}})],1)],1)},l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"no-data-box"},[r("img",{staticClass:"no-data-pic",attrs:{src:a("ITl7")}}),e._v(" "),r("p",{staticClass:"no-data-text"},[e._v("暂无数据，请先"),r("span",{staticClass:"redText"},[e._v("添加采集任务至待审核")])])])}],o={render:r,staticRenderFns:l};t.a=o},qpHs:function(e,t,a){"use strict";var r=a("T5X1");t.a={name:"",props:["CollectListTabTime"],components:{AddUpdateCollect:r.a},data:function(){return{total:0,currentPage:1,pageLength:10,deleteSelection:[],isEdit:!1,isEditRelation:{currTime:(new Date).getTime(),id:""},editCollectVisible:!1,dataSourceName:"",sourceList:[]}},methods:{getList:function(e,t){var a=this;e&&(this.currentPage=e);var r={start:(this.currentPage-1)*this.pageLength,length:this.pageLength,taskName:this.dataSourceName};this.$urlApi.metaData.getCollectList(r).then(function(e){"delete"===t&&e.recordsFiltered%a.pageLength==0&&a.currentPage>1&&a.getList(e.recordsFiltered/a.pageLength),a.sourceList=e.data,a.total=e.recordsFiltered})},handleSizeChange:function(e){this.pageLength=e,this.getList(1)},handleCurrentChange:function(e){this.currentPage=e,this.getList()},changeFun:function(e){this.deleteSelection=e},testAlert:function(e){var t=this;this.$confirm("是否提交采集任务?","提交任务",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"cancelButton",confirmButtonClass:"confirmButton",type:"warning",closeOnClickModal:!1}).then(function(){t.$urlApi.metaData.submitTask({taskId:e}).then(function(e){t.$toast("success","提交成功!"),t.getList()})}).catch(function(){})},addCollect:function(e){var t=(new Date).getTime();this.editCollectVisible=!0,this.isEditRelation.id=e,this.isEditRelation.currTime=t},deleteCollect:function(e){var t=this,a=this.deleteSelection.map(function(e){return e.id}).join(),r="s"===e?{ids:a}:{ids:e};this.$confirm("确认要删除吗","系统消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"cancelButton",confirmButtonClass:"confirmButton",closeOnClickModal:!1}).then(function(){t.$urlApi.metaData.deleteCollect(r).then(function(e){t.getList(0,"delete"),t.$toast("success","删除成功")})}).catch(function(){})},searchList:function(){this.getList(1)},editCollectBack:function(e){this.editCollectVisible=!1,this.isEditRelation.id=-1,1===e&&this.getList()}},mounted:function(){this.getList()},watch:{CollectListTabTime:function(e,t){this.getList()}}}},rwXC:function(e,t,a){"use strict";var r=a("treS");a.n(r);t.a={name:"",components:{},props:["editCollectVisible","isEditRelation"],data:function(){return{buttonLoading:!1,dataOption:[],dataSourceName:"",timeOptions:function(e){for(var t=[],a=0;a<=59;a++)t.push({value:a,label:a});return t}(),ruleForm:{id:0,taskName:"",datasourceId:"",metadataMenuId:"",reMetadataMenuId:[],triggerTime:"",cycleType:"0",jobCron:"",effectTimeRange:[],exeDate1:{value1:"",value2:""},exeDate2:{value1:"",value2:""},exeDate3:{value1:""},exeDate4:{value1:""}},layerOptionsProps:{value:"id",label:"name"},layerOptions:[],rules:{taskName:[{required:!0,message:"请填写任务名称",trigger:"blur"}],datasourceId:[{required:!0,message:"请选择数据源",trigger:"change"}],reMetadataMenuId:[{required:!0,message:"请选择挂载目录",trigger:"change"}],cycleType:[{required:!0,message:"请选择调度方式",trigger:"change"}],jobCron:[{required:!0,message:"请设置执行频率",trigger:"change"},{validator:this.checkjobCron,trigger:"blur"}],triggerTime:[{required:!0,message:"请选择采集频率",trigger:"change"}],effectTimeRange:[{required:!0,message:"请选择生效时间",trigger:"blur"}]},sourceList:[],CycleSelected:"",currId:null,pickerOptions:{disabledDate:function(e){return e.getTime()+864e5<Date.now()}}}},methods:{checkjobCron:function(e,t,a){if(!t)return a(new Error("请选择采集频率"));if("0"===t){if(!this.ruleForm.exeDate1.value1||!this.ruleForm.exeDate1.value2)return a(new Error("采集频率请填写完整"));a()}else if("1"===t){if(!this.ruleForm.exeDate2.value1||!this.ruleForm.exeDate2.value2)return a(new Error("采集频率请填写完整"));a()}else if("2"===t){if(!this.ruleForm.exeDate3.value1)return a(new Error("采集频率请填写完整"));a()}else if("3"===t){if(!this.ruleForm.exeDate4.value1||!this.ruleForm.exeDate4.value1.length)return a(new Error("采集频率请填写完整"));a()}},setCycle:function(e){this.CycleSelected=e},handleChange:function(e){this.ruleForm.exeDate1.value1=e},getMetaDirs:function(){var e=this;this.$urlApi.metaData.getMetaDataDirs({metadataType:1}).then(function(t){e.layerOptions=t.data}).then(function(t){e.getDataSource()})},getDataSource:function(){var e=this;this.$urlApi.metaData.getDataCollectDs().then(function(t){e.dataOption=t.data})},getDataById:function(){var e=this;this.$urlApi.metaData.getCollectDataById({id:this.isEditRelation.id}).then(function(t){var a=t.data;if(e.ruleForm.cycleType=a.cycleType,e.CycleSelected=a.jobCron,e.ruleForm.reMetadataMenuId=a.backMetadataMenuId.split(",").map(Number),e.ruleForm.datasourceId=a.datasourceId,e.ruleForm.taskName=a.taskName,e.dataSourceName=a.dataSourceName,e.ruleForm.jobCron=a.jobCron,"1"==e.ruleForm.cycleType){switch(a.jobCron){case"0":e.ruleForm.exeDate1.value1=a.triggerTime.substring(0,a.triggerTime.indexOf(":")),e.ruleForm.exeDate1.value2=a.triggerTime.substring(a.triggerTime.indexOf(":")+1,a.triggerTime.length);break;case"1":e.ruleForm.exeDate2.value1=a.triggerTime.substring(0,a.triggerTime.indexOf(":")),e.ruleForm.exeDate2.value2=a.triggerTime.substring(a.triggerTime.indexOf(":")+1,a.triggerTime.length);break;case"2":e.ruleForm.exeDate3.value1=a.triggerTime;break;case"3":e.ruleForm.exeDate4.value1=a.triggerTime.split(",")}e.ruleForm.effectTimeRange[0]=Object(r.changeUTCtoDateTime)("yyyy-MM-dd HH:mm:ss",a.startTime),e.ruleForm.effectTimeRange[1]=Object(r.changeUTCtoDateTime)("yyyy-MM-dd HH:mm:ss",a.endTime)}else e.ruleForm.triggerTime=a.triggerTime})},clearData:function(){this.$refs.ruleForm.resetFields(),this.ruleForm.id=0,this.ruleForm.triggerTime="",this.ruleForm.jobCron="",this.ruleForm.reMetadataMenuId=[],this.ruleForm.exeDate1={value1:"",value2:""},this.ruleForm.exeDate2={value1:"",value2:""},this.ruleForm.exeDate3={value1:""},this.ruleForm.exeDate4={value1:""}},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a={};if("0"===t.ruleForm.cycleType)a.jobCron=4,a.triggerTime=t.ruleForm.triggerTime;else{switch(t.ruleForm.jobCron){case"0":a.triggerTime=t.ruleForm.exeDate1.value1+":"+t.ruleForm.exeDate1.value2;break;case"1":a.triggerTime=t.ruleForm.exeDate2.value1+":"+t.ruleForm.exeDate2.value2;break;case"2":a.triggerTime=t.ruleForm.exeDate3.value1;break;case"3":a.triggerTime=t.ruleForm.exeDate4.value1.join(",")}if(a.jobCron=t.ruleForm.jobCron,a.startTime=t.ruleForm.effectTimeRange[0],a.endTime=t.ruleForm.effectTimeRange[1].replace("00:00:00","23:59:59"),+new Date(a.endTime)-+new Date<0)return t.$toast("error","当前调度结束时间必须大于当前时间！")}a.taskName=t.ruleForm.taskName,a.datasourceId=t.ruleForm.datasourceId,a.metadataMenuId=t.ruleForm.reMetadataMenuId[t.ruleForm.reMetadataMenuId.length-1],a.backMetadataMenuId=t.ruleForm.reMetadataMenuId.join(","),a.cycleType=t.ruleForm.cycleType,a.id=t.ruleForm.id,t.buttonLoading=!0,t.$urlApi.metaData.AddCollectTask(a).then(function(e){t.$toast("success","操作成功"),t.clearData(),t.$emit("editCollectBack",1),t.buttonLoading=!1}).catch(function(e){t.buttonLoading=!1})})},closeDialog:function(){this.$emit("editCollectBack",0),this.clearData()},cycleTypeChange:function(e){"0"===e?this.ruleForm.triggerTime="":"1"===e&&(this.ruleForm.jobCron="",this.CycleSelected="",this.ruleForm.effectTimeRange=[],this.ruleForm.exeDate1.value1="",this.ruleForm.exeDate1.value2="",this.ruleForm.exeDate2.value1="",this.ruleForm.exeDate2.value2="",this.ruleForm.exeDate3.value1="",this.ruleForm.exeDate3.value1="",this.ruleForm.jobCron="",this.ruleForm.jobCron="",this.ruleForm.jobCron="",this.ruleForm.jobCron="")}},mounted:function(){},watch:{isEditRelation:{handler:function(e,t){this.getMetaDirs(),-1!=e.id&&(this.ruleForm.id=e.id,this.getDataById())},deep:!0}}}},treS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.changeUTCtoDateTime=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:+new Date;if(!e)return"";var a=t;(t instanceof Date||"string"==typeof t)&&(a=+t);var r=new Date(a),l=r.getFullYear(),o=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,i=r.getDate()<10?"0"+r.getDate():r.getDate(),n=r.getHours()<10?"0"+r.getHours():r.getHours(),s=r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes(),c=r.getSeconds()<10?"0"+r.getSeconds():r.getSeconds();return"yyyy-MM-dd HH:mm:ss"===e?l+"-"+o+"-"+i+" "+n+":"+s+":"+c:"yyyy-MM-dd"===e?l+"-"+o+"-"+i:""},t.checkType=function(e){return{"[object Number]":"number","[object String]":"string","[object Boolean]":"boolean","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object","[object Array]":"array","[object Symbol]":"symbol","[object Date]":"date","[object Error]":"error","[object RegExp]":"regExp","[object Function]":"function","[object Math]":"math","[object JSON]":"json","[object Arguments]":"arguments"}[Object.prototype.toString.call(e)]}},u712:function(e,t,a){var r=a("Asxw");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("58854a6f",r,!0,{})},zXpv:function(e,t,a){"use strict";var r=a("+ZLI"),l=a("LmdA");t.a={name:"",components:{CollectList:r.a,StorageCheck:l.a},data:function(){return{CollectListTabTime:(new Date).getTime(),StorageCheckTabTime:(new Date).getTime(),activeName:"first"}},methods:{beforeLeave:function(e,t){var a=(new Date).getTime();"first"===e?this.CollectListTabTime=a:"second"===e&&(this.StorageCheckTabTime=a)}},mounted:function(){}}}});