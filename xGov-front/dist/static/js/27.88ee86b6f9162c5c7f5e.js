webpackJsonp([27],{"0D0u":function(e,t,a){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function r(n,o){try{var i=t[n](o),l=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}var n=a("Xxa5"),o=a.n(n),i=a("treS");a.n(i);t.a={name:"",components:{},props:["EditDispatchTaskVisible","isEditRelation"],data:function(){return{buttonLoading:!1,total:0,page:1,pageLength:10,radio:"",ruleForm:{id:0,taskName:"",alarmName:"",alarmId:"",taskType:"",status:"",datasourceId:"",metadataMenuId:"",reMetadataMenuId:[],triggerTime:"",effectTimeRange:[],cycleType:"0",jobCron:"",exeDate1:{value1:"",value2:""},exeDate2:{value1:"",value2:""},exeDate3:{value1:""},exeDate4:{value1:""}},CycleSelected:"",warnListVisible:!1,warnData:[],sourceRowData:{},timeOptions:function(e){for(var t=[],a=0;a<=59;a++)t.push({value:a,label:a});return t}(),rules:{taskName:[{required:!0,message:"请填写任务名称",trigger:"blur"}],datasourceId:[{required:!0,message:"请选择数据源",trigger:"change"}],reMetadataMenuId:[{required:!0,message:"请选择挂载目录",trigger:"change"}],cycleType:[{required:!0,message:"请选择调度方式",trigger:"change"}],jobCron:[{required:!0,message:"请设置执行频率",trigger:"change"},{validator:this.checkjobCron,trigger:"blur"}],triggerTime:[{required:!0,message:"请选择执行时间",trigger:"change"}],effectTimeRange:[{required:!0,message:"请选择生效时间",trigger:"blur"}]},allUser:[]}},methods:{checkjobCron:function(e,t,a){if(!t)return a(new Error("请选择采集频率"));if("0"===t){if(!this.ruleForm.exeDate1.value1||!this.ruleForm.exeDate1.value2)return a(new Error("采集频率请填写完整"));a()}else if("1"===t){if(!this.ruleForm.exeDate2.value1||!this.ruleForm.exeDate2.value2)return a(new Error("采集频率请填写完整"));a()}else if("2"===t){if(!this.ruleForm.exeDate3.value1)return a(new Error("采集频率请填写完整"));a()}else if("3"===t){if(!this.ruleForm.exeDate4.value1||!this.ruleForm.exeDate4.value1.length)return a(new Error("采集频率请填写完整"));a()}},setCycle:function(e){this.CycleSelected=e},handleChange:function(e){this.ruleForm.exeDate1.value1=e},showModal:function(){this.warnListVisible=!0,this.updateTable()},handleCurrentRow:function(e,t){this.sourceRowData=e,this.radio=e.count},getCurrentRow:function(e){this.sourceRowData=e},handleCurrentChange:function(e){this.page=e,this.radio="",this.updateTable()},handleSizeChange:function(e){this.pageLength=e,this.updateTable()},updateTable:function(){var e=this,t={start:(this.page-1)*this.pageLength,length:this.pageLength};this.$urlApi.dispatchTask.queryAlarmList(t).then(function(){var t=r(o.a.mark(function t(a){var r,n,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.data.forEach(function(e){if(1===e.status?e.status=!0:e.status=!1,"200"===a.code){var t=0;a.data.forEach(function(e){e.count=t++})}}),e.ruleForm.alarmName&&(r=a.data.find(function(t){return t.alarmName===e.ruleForm.alarmName}),e.radio=r.count),t.next=4,e.$urlApi.dispatchTask.getUserList({pageNumber:1,pageSize:1e7});case 4:n=t.sent,i=n.data,a.data.forEach(function(e){var t=e.receivePeople.split(",").map(function(e){return+e}),a=[];t.forEach(function(e){var t=i.find(function(t){return e===t.id});t&&a.push(t.username)}),e.receivePeople=a.join(",")}),e.warnData=a.data,e.total=a.recordsFiltered;case 9:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())},saveDataSource:function(){this.ruleForm.alarmName=this.sourceRowData.alarmName,this.ruleForm.alarmId=this.sourceRowData.id,this.warnListVisible=!1},closeAlarmDialog:function(){this.warnListVisible=!1},getDataById:function(){var e=this;this.$urlApi.dispatchTask.getDispatchTaskById({id:this.isEditRelation.id}).then(function(t){var a=t.data;if(e.ruleForm.cycleType=a.cycleType,e.CycleSelected=a.jobCron,e.ruleForm.taskName=a.taskName,e.ruleForm.alarmName=a.alarmName,0==a.taskType?e.ruleForm.taskType="采集任务":e.ruleForm.taskType="质量任务",e.dataSourceName=a.dataSourceName,e.ruleForm.jobCron=a.jobCron,e.ruleForm.status=a.status,"1"==e.ruleForm.cycleType){switch(a.jobCron){case"0":e.ruleForm.exeDate1.value1=a.triggerTime.substring(0,a.triggerTime.indexOf(":")),e.ruleForm.exeDate1.value2=a.triggerTime.substring(a.triggerTime.indexOf(":")+1,a.triggerTime.length);break;case"1":e.ruleForm.exeDate2.value1=a.triggerTime.substring(0,a.triggerTime.indexOf(":")),e.ruleForm.exeDate2.value2=a.triggerTime.substring(a.triggerTime.indexOf(":")+1,a.triggerTime.length);break;case"2":e.ruleForm.exeDate3.value1=a.triggerTime;break;case"3":e.ruleForm.exeDate4.value1=a.triggerTime.split(",")}e.ruleForm.effectTimeRange[0]=Object(i.changeUTCtoDateTime)("yyyy-MM-dd HH:mm:ss",a.startTime),e.ruleForm.effectTimeRange[1]=Object(i.changeUTCtoDateTime)("yyyy-MM-dd HH:mm:ss",a.endTime)}else e.ruleForm.triggerTime=a.triggerTime})},clearData:function(){this.ruleForm.alarmName="",this.ruleForm.triggerTime="",this.ruleForm.cycleType="",this.ruleForm.reMetadataMenuId=[],this.ruleForm.exeDate1={value1:"",value2:""},this.ruleForm.exeDate2={value1:"",value2:""},this.ruleForm.exeDate3={value1:""},this.ruleForm.exeDate4={value1:""},this.radio=""},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a={};if("0"===t.ruleForm.cycleType)a.jobCron=4,a.triggerTime=t.ruleForm.triggerTime;else{switch(t.ruleForm.jobCron){case"0":a.triggerTime=t.ruleForm.exeDate1.value1+":"+t.ruleForm.exeDate1.value2;break;case"1":a.triggerTime=t.ruleForm.exeDate2.value1+":"+t.ruleForm.exeDate2.value2;break;case"2":a.triggerTime=t.ruleForm.exeDate3.value1;break;case"3":a.triggerTime=t.ruleForm.exeDate4.value1.join(",")}if(a.jobCron=t.ruleForm.jobCron,a.startTime=t.ruleForm.effectTimeRange[0],a.endTime=t.ruleForm.effectTimeRange[1].replace("00:00:00","23:59:59"),+new Date(a.endTime)-+new Date<0)return t.$toast("error","当前调度结束时间必须大于当前时间！")}a.cycleType=t.ruleForm.cycleType,a.id=t.ruleForm.id,a.alarmId=t.ruleForm.alarmId,a.taskName=t.ruleForm.taskName,"采集任务"===t.ruleForm.taskType?a.taskType="0":a.taskType="1",a.status=t.ruleForm.status,t.buttonLoading=!0,t.$urlApi.dispatchTask.dispatchTaskConfig(a).then(function(e){t.buttonLoading=!1,t.$toast("success","操作成功"),t.clearData(),t.$emit("EditDispatchTaskVisibleBack",1)}).catch(function(e){t.buttonLoading=!1})})},closeDialog:function(){this.$emit("EditDispatchTaskVisibleBack",0),this.clearData()},openDialog:function(){}},mounted:function(){},watch:{isEditRelation:{handler:function(e,t){this.updateTable(),-1!=e.id&&(this.ruleForm.id=e.id,this.getDataById())},deep:!0}}}},"83HX":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".task-manage-section{height:100%}.task-manage-section .main-inner{height:calc(100% - 35px)}.task-manage-section .main-inner .task-manage-content{height:calc(100% - 125px)}.task-manage-section .main-inner .task-manage-content .el-table__empty-block{-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.task-manage-section .main-inner .task-manage-content .el-table__empty-block .show-empty{margin-top:20px}.task-manage-section .main-inner .task-manage-content .show-empty{width:100%;text-align:center;padding:10px 0}.task-manage-section .search_list{margin-top:10px}.task-manage-section .search_list .search_title{display:inline-block;width:60px;text-align:right;margin-right:10px}.task-manage-section .search_list .el-radio-button__inner{border:0}.task-manage-section .search_list .el-radio-button__orig-radio:checked+.el-radio-button__inner{color:#3ba3f8;border:0;background:transparent;-webkit-box-shadow:none;-o-box-shadow:none;box-shadow:none}",""])},"8T7J":function(e,t,a){"use strict";function r(e){a("Zjve")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("gQas"),o=a("bd9o"),i=a("VU/8"),l=r,s=i(n.a,o.a,!1,l,null,null);t.default=s.exports},SabL:function(e,t,a){"use strict";function r(e){a("ogVp")}var n=a("0D0u"),o=a("sTbk"),i=a("VU/8"),l=r,s=i(n.a,o.a,!1,l,null,null);t.a=s.exports},SldL:function(e,t){!function(t){"use strict";function a(e,t,a,r){var o=t&&t.prototype instanceof n?t:n,i=Object.create(o.prototype),l=new p(r||[]);return i._invoke=c(e,a,l),i}function r(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}function n(){}function o(){}function i(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(a,n,o,i){var l=r(e[a],e,n);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==typeof c&&b.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,i)},function(e){t("throw",e,o,i)}):Promise.resolve(c).then(function(e){s.value=e,o(s)},i)}i(l.arg)}function a(e,a){function r(){return new Promise(function(r,n){t(e,a,r,n)})}return n=n?n.then(r,r):r()}var n;this._invoke=a}function c(e,t,a){var n=F;return function(o,i){if(n===C)throw new Error("Generator is already running");if(n===L){if("throw"===o)throw i;return f()}for(a.method=o,a.arg=i;;){var l=a.delegate;if(l){var s=u(l,a);if(s){if(s===j)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===F)throw n=L,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=C;var c=r(e,t,a);if("normal"===c.type){if(n=a.done?L:D,c.arg===j)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(n=L,a.method="throw",a.arg=c.arg)}}}function u(e,t){var a=e.iterator[t.method];if(a===g){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=g,u(e,t),"throw"===t.method))return j;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return j}var n=r(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,j;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,j):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,j)}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function d(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(b.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=g,t.done=!0,t};return r.next=r}}return{next:f}}function f(){return{value:g,done:!0}}var g,v=Object.prototype,b=v.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},_=y.iterator||"@@iterator",k=y.asyncIterator||"@@asyncIterator",x=y.toStringTag||"@@toStringTag",w="object"==typeof e,T=t.regeneratorRuntime;if(T)return void(w&&(e.exports=T));T=t.regeneratorRuntime=w?e.exports:{},T.wrap=a;var F="suspendedStart",D="suspendedYield",C="executing",L="completed",j={},E={};E[_]=function(){return this};var S=Object.getPrototypeOf,R=S&&S(S(d([])));R&&R!==v&&b.call(R,_)&&(E=R);var N=i.prototype=n.prototype=Object.create(E);o.prototype=N.constructor=i,i.constructor=o,i[x]=o.displayName="GeneratorFunction",T.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},T.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,x in e||(e[x]="GeneratorFunction")),e.prototype=Object.create(N),e},T.awrap=function(e){return{__await:e}},l(s.prototype),s.prototype[k]=function(){return this},T.AsyncIterator=s,T.async=function(e,t,r,n){var o=new s(a(e,t,r,n));return T.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},l(N),N[x]="Generator",N[_]=function(){return this},N.toString=function(){return"[object Generator]"},T.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var r=t.pop();if(r in e)return a.value=r,a.done=!1,a}return a.done=!0,a}},T.values=d,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,a.next=t,r&&(a.method="next",a.arg=g),!!r}if(this.done)throw e;for(var a=this,r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r],o=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var i=b.call(n,"catchLoc"),l=b.call(n,"finallyLoc");if(i&&l){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(i){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&b.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,j):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),j},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),h(a),j}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;h(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:d(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=g),j}}}(function(){return this}()||Function("return this")())},Xxa5:function(e,t,a){e.exports=a("jyFz")},Zjve:function(e,t,a){var r=a("83HX");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("1ef1546d",r,!0,{})},bd9o:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"task-manage-section main-outer"},[a("el-row",{staticClass:"common-condition ar mb15"}),e._v(" "),a("el-row",{staticClass:"main-inner"},[a("div",{staticClass:"search_list"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"search_title"},[e._v("任务状态:")]),e._v(" "),a("el-radio-group",{attrs:{size:"small"},on:{change:e.changeStatus},model:{value:e.applicationStatus,callback:function(t){e.applicationStatus=t},expression:"applicationStatus"}},[a("el-radio-button",{attrs:{label:""}},[e._v("全部")]),e._v(" "),a("el-radio-button",{attrs:{label:"1"}},[e._v("已启用")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("已暂停")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("已完成")])],1),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-input",{staticStyle:{width:"330px"},attrs:{placeholder:"请输入任务名称进行查询",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeStatus(t)}},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.changeStatus}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"mt20 task-manage-content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"100%"}},[a("template",{slot:"empty"},[a("div",{staticClass:"show-empty"},[e._v("\n            暂无数据，请先配置"),a("span",{staticClass:"redText",on:{click:e.configQuality}},[e._v(" 质量任务 ")])])]),e._v(" "),a("el-table-column",{attrs:{prop:"taskName",label:"任务名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"任务类型","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.taskType?a("span",[e._v("采集任务")]):a("span",[e._v("质量任务")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"任务状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-tag",{staticClass:"new-tag"},[e._v("已启用")]):e._e(),e._v(" "),2==t.row.status?a("el-tag",{staticClass:"error-tag"},[e._v("已暂停")]):e._e(),e._v(" "),3==t.row.status?a("el-tag",{staticClass:"success-tag"},[e._v("已完成")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"调度方式","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[4==t.row.jobCron?a("span",[e._v("单次")]):a("span",[e._v("周期性")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":"",formatter:this.$utils.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"operate-btn operate-btns",attrs:{type:"text"},on:{click:function(a){return e.editTask(t.row.id)}}},[e._v("编辑")]),e._v(" "),2==t.row.status?a("el-button",{staticClass:"operate-btn operate-btns",attrs:{type:"text"},on:{click:function(a){return e.resumeTask(t.row.id)}}},[e._v("启用")]):e._e(),e._v(" "),1==t.row.status?a("el-button",{staticClass:"operate-btn operate-btns",attrs:{type:"text"},on:{click:function(a){return e.pauseTask(t.row.id)}}},[e._v("暂停")]):e._e(),e._v(" "),a("el-button",{staticClass:"operate-btn operate-btns",attrs:{type:"text"},on:{click:function(a){return e.excuteTask(t.row.id)}}},[e._v("立即执行")])]}}])})],2),e._v(" "),a("el-pagination",{staticClass:"ar mt15",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("edit-dispatch-task",{attrs:{EditDispatchTaskVisible:e.EditDispatchTaskVisible,isEditRelation:e.isEditRelation},on:{EditDispatchTaskVisibleBack:e.EditDispatchTaskVisibleBack}})],1)},n=[],o={render:r,staticRenderFns:n};t.a=o},gQas:function(e,t,a){"use strict";var r=a("SabL");t.a={name:"task-manage",components:{EditDispatchTask:r.a},data:function(){return{total:0,currentPage:1,pageLength:10,deleteSelection:[],applicationStatus:"",taskType:"",tableData:[],searchName:"",EditDispatchTaskVisible:!1,isEditRelation:{currTime:(new Date).getTime(),id:""}}},methods:{getList:function(e){var t=this;e&&(this.currentPage=e);var a={start:(this.currentPage-1)*this.pageLength,length:this.pageLength,taskType:this.taskType,status:this.applicationStatus.toString(),taskName:this.searchName};this.$urlApi.dispatchTask.getDispatchTaskList(a).then(function(e){t.tableData=e.data,t.total=e.recordsFiltered})},handleSizeChange:function(e){this.pageLength=e,this.getList(1)},handleCurrentChange:function(e){this.currentPage=e,this.getList()},changeFun:function(e){this.deleteSelection=e},changeStatus:function(e){this.getList(1)},changeType:function(e){this.getList(1)},EditDispatchTaskVisibleBack:function(e){this.EditDispatchTaskVisible=!1,this.isEditRelation.id=-1,1===e&&this.getList()},editTask:function(e){var t=(new Date).getTime();this.isEditRelation.id=e,this.isEditRelation.currTime=t,this.EditDispatchTaskVisible=!0},resumeTask:function(e){var t=this;this.$confirm("确认要重启调度吗","系统消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"cancelButton",confirmButtonClass:"confirmButton",closeOnClickModal:!1}).then(function(){t.$urlApi.dispatchTask.dispatchResume({id:e}).then(function(e){t.getList(),t.$toast("success","重启成功")})}).catch(function(){})},pauseTask:function(e){var t=this;this.$confirm("确认要暂停调度吗","系统消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"cancelButton",confirmButtonClass:"confirmButton",closeOnClickModal:!1}).then(function(){t.$urlApi.dispatchTask.dispatchPause({id:e}).then(function(e){t.getList(),t.$toast("success","暂停成功")})}).catch(function(){})},excuteTask:function(e){var t=this;this.$confirm("确认要立即执行调度吗","系统消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"cancelButton",confirmButtonClass:"confirmButton",closeOnClickModal:!1}).then(function(){t.$urlApi.dispatchTask.dispatchExcuteTask({taskId:e}).then(function(e){t.getList(),t.$toast("success","立即执行成功")})}).catch(function(){})},configDataCollect:function(){this.$router.push("/metaData/default/collcet")},configQuality:function(){this.$router.push("/quality/default/task")}},mounted:function(){this.getList()}}},jyFz:function(e,t,a){var r=function(){return this}()||Function("return this")(),n=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=n&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=a("SldL"),n)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},lOeb:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".edit-task .el-dialog__body .business-basic-t{height:90px;padding:15px 10px;line-height:30px}.edit-task .el-dialog__body .business-basic-b{height:calc(100% - 100px)}.edit-task .el-dialog__body .business-basic-b .el-table .el-table th,.edit-task .el-dialog__body .business-basic-b .el-table td{padding:6px 0}",""])},ogVp:function(e,t,a){var r=a("lOeb");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("52883672",r,!0,{})},sTbk:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"edit-task",attrs:{"close-on-click-modal":!1,width:"760px",title:"编辑调度任务",visible:e.EditDispatchTaskVisible,"before-close":e.closeDialog,"append-to-body":""},on:{"update:visible":function(t){e.EditDispatchTaskVisible=t},closed:e.clearData,open:e.openDialog}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,size:"small","label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"任务名称:"}},[e._v("\n        "+e._s(e.ruleForm.taskName)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"任务类型:"}},[e._v("\n        "+e._s(e.ruleForm.taskType)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"调度规则:",prop:"cycleType"}},[a("el-radio-group",{model:{value:e.ruleForm.cycleType,callback:function(t){e.$set(e.ruleForm,"cycleType",t)},expression:"ruleForm.cycleType"}},[a("el-radio",{attrs:{label:"0"}},[e._v("单次")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("周期性")])],1)],1),e._v(" "),"0"===e.ruleForm.cycleType?a("el-form-item",{attrs:{label:"执行时间:",prop:"triggerTime"}},[a("el-date-picker",{attrs:{size:"small",type:"datetime","value-format":"timestamp",placeholder:"选择执行时间"},model:{value:e.ruleForm.triggerTime,callback:function(t){e.$set(e.ruleForm,"triggerTime",t)},expression:"ruleForm.triggerTime"}})],1):e._e(),e._v(" "),"1"===e.ruleForm.cycleType?a("el-form-item",{attrs:{label:"采集频率:",prop:"jobCron"}},[a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"请设置执行周期"},on:{change:e.setCycle},model:{value:e.ruleForm.jobCron,callback:function(t){e.$set(e.ruleForm,"jobCron",t)},expression:"ruleForm.jobCron"}},[a("el-option",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"请选择频率",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"按月执行",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"按周执行",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"按天执行",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"按小时执行",value:"3"}})],1)],1),e._v(" "),"0"===e.CycleSelected?a("el-col",{staticClass:"year ml5",attrs:{span:17}},[a("el-col",{staticClass:"mr5",attrs:{span:8}},[a("el-input-number",{attrs:{min:1,max:31,label:"设置执行日"},on:{change:e.handleChange},model:{value:e.ruleForm.exeDate1.value1,callback:function(t){e.$set(e.ruleForm.exeDate1,"value1",t)},expression:"ruleForm.exeDate1.value1"}})],1),e._v(" "),a("el-col",{attrs:{span:13}},[a("el-time-picker",{attrs:{placeholder:"任意时间点","value-format":"HH:mm:ss"},model:{value:e.ruleForm.exeDate1.value2,callback:function(t){e.$set(e.ruleForm.exeDate1,"value2",t)},expression:"ruleForm.exeDate1.value2"}})],1)],1):e._e(),e._v(" "),"1"===e.CycleSelected?a("el-col",{staticClass:"year ml5",attrs:{span:16}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"请设置执行周期"},model:{value:e.ruleForm.exeDate2.value1,callback:function(t){e.$set(e.ruleForm.exeDate2,"value1",t)},expression:"ruleForm.exeDate2.value1"}},[a("el-option",{attrs:{label:"周日",value:"SUN"}}),e._v(" "),a("el-option",{attrs:{label:"周一",value:"MON"}}),e._v(" "),a("el-option",{attrs:{label:"周二",value:"TUE"}}),e._v(" "),a("el-option",{attrs:{label:"周三",value:"WED"}}),e._v(" "),a("el-option",{attrs:{label:"周四",value:"THU"}}),e._v(" "),a("el-option",{attrs:{label:"周五",value:"FRI"}}),e._v(" "),a("el-option",{attrs:{label:"周六",value:"SAT"}})],1)],1),e._v(" "),a("el-col",{staticClass:"ml5",attrs:{span:6}},[a("el-time-picker",{attrs:{placeholder:"任意时间点","value-format":"HH:mm:ss"},model:{value:e.ruleForm.exeDate2.value2,callback:function(t){e.$set(e.ruleForm.exeDate2,"value2",t)},expression:"ruleForm.exeDate2.value2"}})],1)],1):e._e(),e._v(" "),"2"===e.CycleSelected?a("el-col",{staticClass:"year ml5",attrs:{span:16}},[a("el-col",{attrs:{span:6}},[a("el-time-picker",{attrs:{placeholder:"任意时间点","value-format":"HH:mm:ss"},model:{value:e.ruleForm.exeDate3.value1,callback:function(t){e.$set(e.ruleForm.exeDate3,"value1",t)},expression:"ruleForm.exeDate3.value1"}})],1)],1):e._e(),e._v(" "),"3"===e.CycleSelected?a("el-col",{staticClass:"year ml5",attrs:{span:16}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择时间（可多选）"},model:{value:e.ruleForm.exeDate4.value1,callback:function(t){e.$set(e.ruleForm.exeDate4,"value1",t)},expression:"ruleForm.exeDate4.value1"}},e._l(e.timeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e()],1):e._e(),e._v(" "),"1"===e.ruleForm.cycleType?a("el-form-item",{attrs:{label:"生效时间",prop:"effectTimeRange"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd HH:mm:ss",size:"small","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.ruleForm.effectTimeRange,callback:function(t){e.$set(e.ruleForm,"effectTimeRange",t)},expression:"ruleForm.effectTimeRange"}})],1):e._e(),e._v(" "),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"告警规则:"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.alarmName,callback:function(t){e.$set(e.ruleForm,"alarmName",t)},expression:"ruleForm.alarmName"}})],1)],1),e._v(" "),a("el-col",{staticClass:"ar",attrs:{span:6}},[a("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"danger",size:"mini"},on:{click:e.showModal}},[e._v("选择告警规则")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",loading:e.buttonLoading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"选择告警规则",width:"60%",visible:e.warnListVisible},on:{"update:visible":function(t){e.warnListVisible=t}}},[a("el-table",{attrs:{data:e.warnData,"highlight-current-row":""},on:{"current-change":e.handleCurrentRow}},[a("el-table-column",{attrs:{label:"选择",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{staticClass:"textRadio",attrs:{label:t.$index},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"alarmName",label:"告警任务名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"告警原因","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.alarmReasion?a("el-tag",{staticClass:"success-tag"},[e._v("成功")]):e._e(),e._v(" "),0==t.row.alarmReasion?a("el-tag",{staticClass:"error-tag"},[e._v("失败")]):e._e(),e._v(" "),2==t.row.alarmReasion?a("el-tag",{staticClass:"going-tag"},[e._v("成功/失败")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"告警方式","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.alarmMethod?a("span",[e._v("邮件")]):e._e(),e._v(" "),2==t.row.alarmMethod?a("span",[e._v("短信")]):e._e(),e._v(" "),3==t.row.alarmMethod?a("span",[e._v("邮件/短信")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"receivePeople",label:"接收人","show-overflow-tooltip":""}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.closeAlarmDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.saveDataSource}},[e._v("保 存")])],1)],1)],1)},n=[],o={render:r,staticRenderFns:n};t.a=o},treS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.changeUTCtoDateTime=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:+new Date;if(!e)return"";var a=t;(t instanceof Date||"string"==typeof t)&&(a=+t);var r=new Date(a),n=r.getFullYear(),o=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,i=r.getDate()<10?"0"+r.getDate():r.getDate(),l=r.getHours()<10?"0"+r.getHours():r.getHours(),s=r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes(),c=r.getSeconds()<10?"0"+r.getSeconds():r.getSeconds();return"yyyy-MM-dd HH:mm:ss"===e?n+"-"+o+"-"+i+" "+l+":"+s+":"+c:"yyyy-MM-dd"===e?n+"-"+o+"-"+i:""},t.checkType=function(e){return{"[object Number]":"number","[object String]":"string","[object Boolean]":"boolean","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object","[object Array]":"array","[object Symbol]":"symbol","[object Date]":"date","[object Error]":"error","[object RegExp]":"regExp","[object Function]":"function","[object Math]":"math","[object JSON]":"json","[object Arguments]":"arguments"}[Object.prototype.toString.call(e)]}}});